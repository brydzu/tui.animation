<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Using Promise</title>
</head>
<body>
<div class="code-html">
<style type="text/css">
    .context {width: 260px;}
    .inlineblock {display:inline-block;vertical-align:middle}
    .move-box-container {width:198px;height:18px;border:1px solid #ccc;position:relative}
    .move-box {width:1px;height:18px;background-color:red;position:absolute}
    .move-btn-container {width:50px}
    .move-btn {height:20px}
</style>
<p>
    You can use `Promise` to handle end of animation.
    
    This `Promise` feature is checked on native and shim of core-js.
</p>
<div id="easeInOut" class="context">
    <div class="move-box-container inlineblock">
        <div class="move-box"></div>
    </div>
    <div class="move-btn-container inlineblock">
        <button class="move-btn" type="button">run</button>
    </div>
</div>
<div class="move-console"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/nhnent/tui.code-snippet/1.2.2/code-snippet.min.js"></script>
<script src="../dist/tui-component-animation.js"></script>
<script class="code-js">
const isSupportPromise = (typeof Promise !== "undefined") &&
    (/\[native code\]/.test(Promise.toString()));

if (!isSupportPromise) {
    $('#easeInOut').html('<h2 style="color:red">Browser not support `Promise`.</h2>');
} else {
    $('div.context').each(function(_, container) {
        container = $(container);

        var easing = container.attr('id');
        var box = container.find('.move-box');

        container.find('.move-btn').on('click', function() {
            tui.component.animation.anim({
                easing: easing,
                frame: function(left) {
                    box.css({left: left + '%'});
                }
            }).run().then(function() {
                $('.move-console').html('<span style="color:red">Completed</span>');
            });
        });
    });
}
</script>
</body>
</html>
